function sendSns(t){var a=encodeURIComponent(location.href),e=encodeURIComponent($("title").html());switch(t){case"facebook":window.open("http://www.facebook.com/sharer/sharer.php?u="+a);break;case"twitter":window.open("http://twitter.com/intent/tweet?text="+e+"&url="+a)}}$(window).load(function(){var t=$(window).width(),a=$(window).height(),e=t<=710,c=navigator.userAgent.toLowerCase();("Netscape"==navigator.appName&&-1!=c.indexOf("trident")||-1!=c.indexOf("msie"))&&(!0,$(".ie-block").show()),window.onbeforeunload=function(){window.scrollTo(0,0)},$(window).resize(function(){t=$(window).width(),a=$(window).height()});var n=["작업계획서 미작성 혹은 사전 위험평가 미실시","안전대 미지급/미착용 혹은 안전대 부착설비 미설치/설치불량","안전모 미지급/미착용 혹은 착용상태 불량","안전난간, 추락방호망 등 추락방지설비 없음","단독 작업 혹은 작업지휘자(감시인,관리자) 없음","위험지역 출입금지 조치 미실시","기계의 정비/수리/확인등의 작업 시 운전정지 하지 않음","설계/작업 기준을 미준수한 불량한 방법 사용","작업 공정의 위험성 등 안전교육 미실시","기계의 안전장치 강제 해제, 불량/미비(뚜껑이 열리면 동작 안 해야 하는데 동작)","안전감시단 미배치 혹은 관리자 감시 소홀 ","건설/하역용 차량 유도자 미배치","추락 위험이 있는 열린 공간(개구부) 방치 및 방호조치 미흡","고소작업시 비계/안전발판 쓰지 않고 작업","안전한 작업통로/작업공간 미확보","적재 불량 등 불안정한 상태의 중량물 방치","전도방지, 고정장치 등 안전조치가 미흡한 사다리/비계/고소작업대에서 작업 ","고소작업시 비계/안전발판 쓰지 않고 사다리 사용","지붕 위 작업 시 선라이트, 슬레이트 등 약한 소재 밟음","불명확한 의사소통 방법/신호로 인한 사고","작업환경이나 기계/작업도구의 구조적 결함","중량물 인양시 부적절한 방법 사용 혹은 안전수칙 미준수","끼임의 위험이 있는 기계 등에 방호조치 미비","기계/차량 등의 정기 검사 및 정비 미실시","굴삭기, 기계차 등 면허 없는 사람이 조종","훼손되거나 불량인 작업 도구나 부품 사용","내부 조도 미흡으로 위험물 식별 어려움","전기 작업 시 전원차단/절연 상태 미흡/미확인","차량/기계 사용 중 사람이 타지 않아야 할 곳에 탑승","건설기계 위험 반경 내 출입금지 미실시","위험 작업 시 마스크/내열성 앞치마/끼임방지 장갑 등 특수 보호구 미착용","전기 작업시 절연장갑/절연모 등 절연보호구 미지급/미착용","기계/설비 등의 넘어짐 방지조치 미흡","낙하 위험이 있는 중량물(승강기 등) 고정 미흡","운전위치 이탈 시 안전조치(주차브레이크, 고임목) 미실시","중량물 운반 시 하중/규격에 맞지 않는 기구 사용","상부 안전난간이 없는 등 부적합한 이동식 비계 사용","굴착사면의 붕괴방지조치 미실시","기계/차량의 구조변경 및 능력에 맞지 않는 사용","낙하물에 맞을 위험이 있는 곳에서 작업","차량계 건설기계 안전벨트 미착용","작업공간 내 산소 및 유해가스 농도 미측정","차량/건설기계 운행로와 작업자 보행로를 구분하지 않음","무자격자/비전문가가 작업 진행","밀폐공간 작업 전, 작업 중 환기 실시 미흡","인화성/위험 물질 취급 부주의","마모/훼손되거나 강도가 약한 로프/고리/발판 사용","기계 끼임 등 위험상황시 순간정지장치 없음","작업 도구/기계 목적 외 사용","비계와 건물 사이 뚫린 공간에 방호조치 불량 혹은 바깥 안전난간 설치 미비","고소작업대 안전난간 미설치 혹은 불량","달비계 사용시 별도의 구명줄 미설치","사다리를 상부 높이보다 낮게 설치하는 등 부적절한 사용","차량 운전자의 시야 미확보","미끄럽거나 장애물이 많아 넘어질 위험 많은 바닥 방치","고온, 고압의 기계 사용시 안전조치 미흡","굴착면 기울기 미준수","벌목 작업 시 안전 대피로/위험신호 미지정","달비계 설치시 로프 체결상태 미점검 혹은 감시자 미배치","안전거리 미교육 혹은 미준수","화재/사고 등 비상시 대피로 및 대피장소 미확보 혹은 신호방법 부재","위험물질 근처에서 화재/폭발 위험성 있는 작업","추락/낙하 위험이 있는 곳에서 안전장치 없이 차량 운행","안전 인증 없이 차량/기계의 임의개조","금속/유기화합물 분진으로 인한 폭발방지 미흡","사고 발생 원인 미상","구명조끼 미지급 혹은 미착용","낙하물 방지망등 안전시설물 설치 미흡","적절한 보강조치 않은 상태에서 작업 중 붕괴","고소작업대 과상승 방지장치 설치 불량","교통규칙 무시한 차량 운행 및 주차","경사진 공간에서 차량에 화물 적재 혹은 차량 연결 실시","벌목 작업 시 기타 부적절한 방법 사용","지반침하 붕괴방지조치 미실시","안전인증 미실시 하거나 기준에 미달하는 설비 사용 ","적절한 휴게시설 미비 , 휴게시간 미부여","악천후 속 무리한 작업 ","가공작업 중 가공물에 고정장치 미체결","벌목 작업 시 방향베기(수구) 작업 미실시","화재 위험 장소 소화기/소화전 작동 불량","전기 기계 기구의 접지 미실시","도로의 폭이 좁거나, 도로상의 장애물 방치","전기설비 단락으로 인한 스파크 발생","볼트/나사 풀림방지조치 미실시","개인 질병","작업시 집중력 저하, 실수 발생","소금 등의 주변 비치 소홀","산업재해 발생에 따른 구조등의 비상대응 미실시","거푸집 혹은 갱폼의 조립 불량","CCTV 미설치로 작업공간 모니터링 불가","잠수 작업에 맞는 비상 장비 미지급/미착용","감염병/독충 예방 조치 미실시","강도/길이/너비 등이 부적절한 부속품 사용","밀폐공간 출입 인원 점검 미실시","유기용제에 의한 건강장애 발생"];$(".common-footer").addClass("common-footer-dark");var o=function(){1==e?$(".art_header ").animate({top:"0px"},1e3,"swing"):$(".common_header").animate({top:"0px"},1e3,"swing")},r=!1,s=!1;$("body").removeClass("fixed"),$(".loading-page").delay(1e3).fadeOut(1e3,function(){$(".step--01-ment p").fadeIn(),$(".c-s-01").fadeIn(function(){r=!0})});var l,d=function(t,a){return Math.floor(Math.random()*(a-t+1)+t)},u=0,h=$(".intro-photo"),m=function(){$(".step--01").fadeOut();for(var t=0;t<h.length;t++){var a=1==e&&$(".photo-random").height()-100||$(".photo-random").height()-300,c=d(0,$(".photo-random").width())+"px",i=d(0,a)+"px";h.eq(t).css({left:c}),h.eq(t).css({top:i})}l=setInterval(function(){h.eq(u).fadeIn(1500),++u==h.length&&(clearInterval(l),f())},500),$(".step02-final-photo, .c-s-02").fadeIn(function(){s=!0})},p=function(){$(".story-intro").fadeOut(500),$(".story-body").animate({height:$(".story-body").get(0).scrollHeight},function(){$(this).height("auto"),$(".intro-quo").animate({opacity:"1"},1e3)})},f=function(){clearInterval(l),o(),p()};$(".c-s-01, .start-death-icon").on("click",function(){1==r&&m()}),$(".c-s-02, .step02-final-photo img").on("click",function(){1==s&&f()}),$(".intro-skip").on("click",function(){clearInterval(l),o(),p()});victimValues.sort(function(t,a){return new Date(t.date).getTime()>new Date(a.date).getTime()?1:-1});var y=1==e?2:4,b=1==e?13:15,k=2*b,x=parseInt($("#iconHolder").width()/(b+y)),w=victimValues.length;$("#iconHolder").css({width:$(".icon-wrap").width(),height:w/x*(k+y)+40}),$("#userSelect").html(w),$(".count-index .total, .count-index .slash").css({opacity:"0"});victimValues.map(function(t,a,c){c[a].Xpos=function(t){return 1==e?t%x*(b+y):parseInt(t/x)%2==1?t%x*(b+y):t%x*(b+y)+.5*b}(a),c[a].Ypos=function(t){return parseInt(t/x)*(k+y)}(a)});var C=function(){$(".sec--2 .top-display .count-index .select").addClass("select-after"),$(".sec--2 .sec-title").animate({opacity:"1"},1e3),$(".sec--2 .tab-holder").animate({opacity:"1"},1e3),$(".icon-guide").animate({opacity:"1"}),$(".icon-wrap").removeClass("icon-block"),R=!0,$(".count-index .total, .count-index .slash").animate({opacity:"0.6"})},V=d3.select("#iconHolder").append("g").attr("class","icon-group").selectAll(".icon").data(victimValues).enter().append("g").attr("class","icon").attr("transform",function(t,e){return"translate("+t.Xpos+","+(-d(0,3*a)+a)+")"}).attr("data-index",function(t,a){return a}).style("width",b).style("height",k).style("fill","rgba(255,255,255,0.5)");V.append("rect").attr("class","iconBack").style("width",b).style("height",k).attr("fill","rgba(255,255,255,0.05)"),V.append("path").attr("d",function(t){if("떨어짐"==t.accType)var a=d(9,13);else if("끼임"==t.accType)a=d(14,17);else if("물체에 맞음"==t.accType)a=d(18,21);else if("부딪힘"==t.accType)a=d(22,25);else if("깔림·뒤집힘"==t.accType)a=d(26,29);else a=d(0,8);return iconPath[a].path}).style("transform",1==e?"scale(0.9)":"none").style("fill",function(t){return"떨어짐"==t.accType?"#e0523f":"끼임"==t.accType?"#ed8c72":"물체에 맞음"==t.accType?"#ef9770":"부딪힘"==t.accType?"#fdca94":"깔림·뒤집힘"==t.accType?"#feebcf":"#fff"}).style("opacity",1==e?"1":"0.8"),0==e&&V.on("mouseover",function(t){d3.select(this).select("path").transition().duration(100).style("opacity","1").style("stroke","#ffa409").style("stroke-width","3px"),d3.select(this).select("rect").transition().duration(100).style("fill","rgba(255,255,255,0.2)")}).on("mouseout",function(t){d3.select(this).select("path").transition().duration(100).style("opacity","0.8").style("stroke-width","0px"),d3.select(this).select("rect").transition().duration(100).style("fill","rgba(255,255,255,0.05)")}),$(".year-tab ul li").on("click",function(){var t=$(this).attr("data-year");$(".year-tab ul li").removeClass("on"),$(this).addClass("on"),$(".temp-loading").fadeIn(function(){resetSvg(),makeSvgIcon(t)})});$(".icon-holder").on("mouseover",".icon",function(){if(0==e){!function(t){if($(".icon-tooltip .year").html(victimValues[t].date),0==victimValues[t].noRt)""==victimValues[t].age||"-"==victimValues[t].age?($(".icon-tooltip .person-info").html(victimValues[t].name),$(".top-display .victim .person-info").html(victimValues[t].name)):($(".icon-tooltip .person-info").html(victimValues[t].name+"<span>I</span>"+victimValues[t].age+"세"),$(".top-display .victim .person-info").html((victimValues[t].name.length<2?victimValues[t].name+"○○":victimValues[t].name)+" "+String("미상"==victimValues[t].age?"나이 미상":victimValues[t].age+"세")));else{var a=[victimValues[t].name.length<2?victimValues[t].name+"○○":victimValues[t].name];""==victimValues[t].age||"미상"==victimValues[t].age?a.push("나이 미상"):a.push(victimValues[t].age+"세"),""==victimValues[t].occuType&&a.push(victimValues[t].occuType),$(".icon-tooltip .person-info").html(a.join("<span>I</span>")),$(".top-display .victim .person-info").html(a.join(" "))}}($(this).attr("data-index"));var t=$(this).position().left,a=$(this).position().top;$(".icon-tooltip").css({opacity:"1",top:a+30,left:t-50})}}),$(".icon-holder").on("mouseout",".icon",function(){$(".icon-tooltip").css({opacity:0}),$(".back-photo img").attr("src",""),$(".top-display .victim .person-info").html("")});var O=!1;$(".accident-card-ani").css({right:"0px"}),$(".icon-holder").on("click",".icon",function(){if(0==O){O=!0,$("body").addClass("fixed");var t=$(this).attr("data-index");T(t),$("#cardScroll").animate({scrollTop:0}),$(".accident-card").show(),1==e?$(".accident-card-ani").fadeIn(function(){$(".card-back").show(),O=!1}):$(".accident-card-ani").animate({opacity:"1"},600,function(){$(".card-back").show(),O=!1})}});var T=function(t){$(".accident-card .acc-date").html("<em class='head'>재해일시</em>"+victimValues[t].date+" "+victimValues[t].time);var c=function(t){if(0==victimValues[t].noRt)return[victimValues[t].name.length<2?victimValues[t].name+"○○":victimValues[t].name,String("미상"==victimValues[t].age||"-"==victimValues[t].age||""==victimValues[t].age?"나이 미상":victimValues[t].age+"세")].join("<span>I</span>");var a=[victimValues[t].name.length<2?victimValues[t].name+"○○":victimValues[t].name,String("미상"==victimValues[t].age||"-"==victimValues[t].age||""==victimValues[t].age?"나이 미상":victimValues[t].age+"세")];if(""!=victimValues[t].emp1&&"-"!=victimValues[t].emp1&&a.push(victimValues[t].emp1),""!=victimValues[t].emp2&&"-"!=victimValues[t].emp1&&a.push(victimValues[t].emp2),""!=victimValues[t].skill&&"-"!=victimValues[t].skill){var e=victimValues[t].skill;""==victimValues[t].careerY||(e=e+"(경력"+victimValues[t].careerY+"년)"),a.push(e)}return a.join("<span>I</span>")}(t);if($(".accident-card .victim-info").html("<em class='head'>재해자</em>"+c),$(".accident-card .victim-info-immigrant").html(""),""==victimValues[t].immigrant||null==victimValues[t].immigrant?$(".accident-card .victim-info-immigrant").hide():""!=victimValues[t].immigrant&&($(".accident-card .victim-info-immigrant").show(),""!=victimValues[t].illegal?$(".accident-card .victim-info-immigrant").html("* 재해자는 미등록 이주노동자("+victimValues[t].immigrant+")"):$(".accident-card .victim-info-immigrant").html("* 재해자는 이주노동자("+victimValues[t].immigrant+")")),$(".accident-card .acc-type").html("사고유형 - "+victimValues[t].accType),$(".accident-card .full-des").html(victimValues[t].accSummary),$(".accident-card .main").html(victimValues[t].emp1Name),$(".accident-card .sub").html(victimValues[t].emp2Name),"-"==victimValues[t].act||"#N/A"==victimValues[t].indict?$(".accident-card .act-info").hide():($(".accident-card .act-info").show(),$(".accident-card .act-info").html("<em class='head'>행정조치</em>"+victimValues[t].act)),"-"==victimValues[t].indict||"#N/A"==victimValues[t].indict?$(".accident-card .indictment-info").hide():($(".accident-card .indictment-info").show(),$(".accident-card .indictment-info").html("<em class='head'>송치의견</em>"+victimValues[t].indict)),$(".accident-card .card-wrap .acc-due .due-list").html(""),0==victimValues[t].noRt)$(".acc-due").hide();else for($(".acc-due").show(),v=0;v<victimValues[t].accCause.length;v++)$(".accident-card .card-wrap .acc-due .due-list").append("<p class='each-due'>"+n[victimValues[t].accCause[v]]+"</p>");if($("#due").scrollTop(0),0==victimValues[t].noRt||1==victimValues[t].noPhoto?($(".acc-photo-mobile-holder").hide(),$(".accident-card .acc-photo").hide()):(1==e?($(".acc-photo-mobile-holder").show(),$(".accident-card .acc-photo-mobile").show()):$(".accident-card .acc-photo-pc").show(),$(".accident-card .acc-photo").find("img").attr("src","http://img.khan.co.kr/spko/storytelling/2019/labordeath/acc-photo/"+victimValues[t].id+".jpg")),0==e){var i=a<750&&(a-$(".accident-card").height())/2||(a-$(".accident-card").height())/2-50;$(".accident-card").css({top:i})}else $(".accident-card").css({top:"0px"})},M=!1;$(".acc-photo").on("click",function(c){if(c.preventDefault(),c.stopPropagation(),0==M){M=!0,$(this).addClass("acc-photo-fixed");var i=$(this).children("img");1==e?($(".acc-photo-mobile").css({width:"85%",height:"auto","max-height":"80vh"}),i.css({width:"100%",height:"auto"}),$(".acc-photo-fixed").animate({top:(a-i.height())/2,right:"7.5%"},500,"swing",function(){$(".acc-photo-mobile-back").show(),M=!1})):i.width()<=i.height()?($(".acc-photo").css({width:"auto",height:"80vh"}),i.css({height:"100%",width:"auto"}),$(".acc-photo-fixed").animate({top:(a-i.height())/2,right:(t-i.width())/2},500,"swing",function(){$(".acc-photo-back").show(),M=!1})):($(".acc-photo").css({width:"700px"}),i.css({width:"100%",height:"auto"}),$(".acc-photo-fixed").animate({top:(a-i.height())/2,right:(t-700)/2},500,"swing",function(){$(".acc-photo-back").show(),M=!1}))}}),$(".acc-photo-back, .acc-photo-mobile-back").on("click",function(){0==M&&($(this).hide(),$(".acc-photo").removeClass("acc-photo-fixed"),1==e?$(".acc-photo-mobile").css({width:"300px",height:"auto",top:"auto",right:"auto"}):$(".acc-photo").css({width:"200px",height:"auto",top:"-10px",right:"-10px"}),$(".acc-photo img").css({width:"100%"}))}),$(".close-btn, .card-back").on("click",function(){0==M&&($("body").removeClass("fixed"),$(".card-back").hide(),$(".accident-card").hide(),1==e?$(".accident-card-ani").hide():$(".accident-card-ani").css({opacity:"0"}))}),1==e&&$(".card-back").on("touchstart",function(){0==M&&($("body").removeClass("fixed"),$(".card-back").hide(),$(".accident-card").hide(),1==e?$(".accident-card-ani").hide():$(".accident-card-ani").css({opacity:"0"}))});var I=dpd.map(function(t,a,e){var c={};return c.date=d3.timeDay(new Date(e[a].date)),c.value=Number(e[a].death),c}),A=d3.select("#svgHeatmap"),H=1==e?750:850,S=1==e?290:320;$("#svgHeatmap").css({width:H+"px",height:S+"px"});!function(){var t=d3.nest().key(function(t){return t.date.getUTCFullYear()}).entries(I).reverse(),a=I.map(function(t){return t.value}),c=d3.max(a),i=d3.min(a),n=1==e?13:15,o=7*n,r=1==e?30:50,s=A.append("g"),l=s.selectAll("g").data(t).join("g").attr("transform",function(t,a){return"translate("+r+","+((o+30)*a+3*n)+")"});l.append("text").attr("x",1==e?8:0).attr("y",1==e?-6:-10).attr("text-anchor","end").attr("font-size",1==e?14:16).attr("font-weight",550).attr("fill","rgba(255,255,255,0.8)").attr("font-weight","normal").text(function(t){return t.key});var d=function(t){return t.getUTCDay()},u=d3.utcSunday,h=d3.timeFormat("%Y-%m-%d"),m=d3.scaleSequential(d3.interpolateOrRd).domain([Math.floor(i),Math.ceil(c)]);d3.format("+.2%");l.append("g").attr("text-anchor","end").selectAll("text").data(d3.range(7).map(function(t){return new Date(1995,0,t)})).join("text").attr("x",-10).attr("fill","rgba(255,255,255,0.5)").attr("y",function(t){return(d(t)+.5)*n}).attr("dy","0.31em").attr("font-weight","normal").attr("font-size",11).text(function(t){return["월","화","수","목","금","토","일"][t.getUTCDay()]});var p=d3.select(".cal-tooltip"),f=l.append("g").attr("class","cal-plots-holder").selectAll("rect").data(function(t){return t.values}).join("rect");f.attr("width",n-1.5).attr("height",n-1.5).attr("x",function(t,a){return u.count(d3.utcYear(t.date),t.date)*n+10}).attr("y",function(t){return d(t.date)*n+.5}).attr("fill",function(t){return m(t.value)}).attr("class",function(t){return t.value<4?"day cate_0":4<=t.value&&t.value<7?"day cate_1":7<=t.value&&t.value<10?"day cate_2":t.value>=10?"day cate_3":void 0}).append("title").text(function(t){return h(t.date)+", 사망자 "+t.value.toFixed(0)+"명"}),f.on("mouseover",function(t){d3.select(this).classed("dayHover",!0),p.transition().duration(100).style("opacity","1").style("height","auto"),p.html("<p class='date name'>"+h(t.date)+"</p><p class='numb'>"+t.value+"명 </p>")}).on("mouseout",function(t){d3.select(this).classed("dayHover",!1),p.transition().duration(100).style("opacity","0")});var y=s.append("g").attr("transform","translate(324,"+(t.length*(o+30)+3*n)+")"),g=[1,2,3,4,5,6,7].map(function(t,a){var e=c/7*(a+1);return{color:d3.interpolateOrRd(e/c),selected:!0}}),v=[0,14];y.selectAll("rect").data(g).enter().append("rect").attr("fill",function(t){return t.color}).attr("x",function(t,a){return 20*a}).attr("width",20).attr("height",8),y.selectAll("text").data(v).join("text").attr("y",7).attr("x",function(t,a){return 0==a?"-30px":1==a?"150px":void 0}).attr("text-anchor","middle").attr("font-size",10).attr("fill","rgba(255,255,255,0.5)").text(function(t,a){return v[a]+"명"})}();d3.selectAll(".calendar-tab .tab-body span").on("click",function(){var t=".cate_"+$(this).index();if(1==$(this).hasClass("on")){$(this).removeClass("on");var a=$(this).siblings("span").hasClass("on");1==a?(d3.selectAll(".day").classed("dayOff",!0),d3.selectAll(t).classed("dayOn",!1)):0==a&&(d3.selectAll(".day").classed("dayOff",!1),d3.selectAll(t).classed("dayOn",!1))}else $(this).addClass("on"),d3.selectAll(".day").classed("dayOff",!0),d3.selectAll(t).classed("dayOn",!0)});$(".zoom ul li").on("click",function(){var t,a=$(this).index();0==(t=a)?($("#svgHeatmap").css("transform","scale(1)").css("-ms-transform","scale(1)"),$(".zoomOut").removeClass("off"),$(".zoomIn").addClass("off")):1==t&&($("#svgHeatmap").css("transform","scale(0.5)").css("-ms-transform","scale(0.5)"),$(".zoomIn").removeClass("off"),$(".zoomOut").addClass("off"))}),$(".swift-btn-holder .btn-tab ul li").on("click",function(){var t=$(this).attr("data-type");$(".swift-btn-holder .btn-tab ul li").removeClass("on"),$(this).addClass("on"),"full"==t?($(".graph-fall2").hide(),$(".graph-fall").fadeIn()):"detail"==t&&($(".graph-fall").hide(),$(".graph-fall2").fadeIn())});var N=[[{key:"현대차",acc:32},{key:"지자체",acc:31},{key:"대림",acc:31},{key:"포스코",acc:27},{key:"대우건설",acc:26},{key:"GS",acc:20},{key:"현대중공업",acc:20},{key:"HDC",acc:19},{key:"삼성",acc:17},{key:"효성",acc:16},{key:"롯데",acc:16},{key:"SK",acc:14},{key:"LG",acc:13},{key:"중흥건설",acc:13},{key:"공기업",acc:13},{key:"두산",acc:12},{key:"대우조선",acc:12},{key:"한화",acc:11},{key:"LS",acc:10}],[{key:"0~5m",acc:261},{key:"6~10m",acc:130},{key:"11~15m",acc:57},{key:"16~20m",acc:31},{key:"21~25m",acc:14},{key:"26~30m",acc:12},{key:"31~35m",acc:5},{key:"36~40m",acc:8},{key:"41~45m",acc:9},{key:"46m이상",acc:16}],[{key:"1m 이하",acc:10},{key:"1m",acc:45},{key:"2m",acc:67},{key:"3m",acc:76},{key:"4m",acc:47},{key:"5m",acc:48},{key:"6m",acc:34},{key:"7m",acc:30},{key:"8m",acc:29},{key:"9m",acc:24},{key:"10m",acc:17}],[{key:"0:00~0:59",acc:6},{key:"1:00~1:59",acc:1},{key:"2:00~2:59",acc:3},{key:"3:00~3:59",acc:4},{key:"4:00~4:59",acc:4},{key:"5:00~5:59",acc:5},{key:"6:00~6:59",acc:17},{key:"7:00~7:59",acc:44},{key:"8:00~8:59",acc:120},{key:"9:00~9:59",acc:134},{key:"10:00~10:59",acc:160},{key:"11:00~11:59",acc:137},{key:"12:00~12:59",acc:63},{key:"13:00~13:59",acc:122},{key:"14:00~14:59",acc:127},{key:"15:00~15:59",acc:121},{key:"16:00~16:59",acc:87},{key:"17:00~17:59",acc:38},{key:"18:00~18:59",acc:12},{key:"19:00~19:59",acc:12},{key:"20:00~20:59",acc:11},{key:"21:00~21:59",acc:13},{key:"22:00~22:59",acc:9},{key:"23:00~23:59",acc:11}]],P=["#svgCompany","#svgFall","#svgFall2","#svgTime"],z=[".company-tooltip",".fall-tooltip",".fallDetail-tooltip",".time-tooltip"],D=[{barWidth:40,barHeight:15,barMarginPC:2,barMarginM:2,multipleKeyPC:5,multipleKeyM:7,labelWidth:70},{barWidth:50,barHeight:20,barMarginPC:3,barMarginM:2,multipleKeyPC:1,multipleKeyM:1,labelWidth:50},{barWidth:35,barHeight:20,barMarginPC:5,barMarginM:2,multipleKeyPC:3,multipleKeyM:3,labelWidth:50},{barWidth:52,barHeight:15,barMarginPC:3,barMarginM:2,multipleKeyPC:2,multipleKeyM:1.5,labelWidth:70}],K=function(t){var a=d3.select(P[t]),c=N[t],i=c.map(function(t){return t.acc}),n=d3.max(i),o=d3.min(i),r=d3.scaleSequential(d3.interpolateOrRd).domain([o,n]),s=d3.select(z[t]);if(1==e){var l=D[t].barHeight,d=D[t].barMarginM,u=D[t].multipleKeyM,h=D[t].labelWidth,m=$(".d3-graph").eq(t).width(),p=(l+d)*c.length;$(P[t]).css({width:m+"px",height:p+"px"});var f=(g=a.append("g").attr("width",m).attr("height",p).attr("transform","translate("+h+",0)")).selectAll("rect").data(c).enter().append("rect").attr("fill",function(t){return r(t.acc)}).attr("height",l).attr("class","bar").attr("width",function(t){return t.acc*u}).attr("y",function(t,a){return a*(l+d)}).attr("x",function(t){return 0}),y=(g.append("g").attr("transform","translate("+-h+",14)").selectAll("text").data(c).enter().append("text").attr("width","50").attr("transform",function(t,a){return"translate(0, "+a*(l+d)+")"}).attr("fill","rgba(255,255,255,0.8)").attr("font-size","10px").attr("class","graph-Xaxis").attr("text-anchor","start").text(function(t){return t.key}),d3.scaleLinear().range([0,n*u]).domain([0,n]));g.append("g").attr("class","graph-Yaxis").attr("transform","translate(0,-10)").call(d3.axisTop(y).ticks(5).tickFormat(d3.format("d")));f.on("click",function(t){d3.select(this).classed("barHover",!0),s.transition().duration(100).style("opacity","1").style("height","auto"),s.html("<p class='name'>"+t.key+"</p><p class='numb'>"+t.acc+"명 </p>")}).on("mouseout",function(t){d3.select(this).classed("barHover",!1),s.transition().duration(100).style("opacity","0")})}else{var g,v=D[t].barWidth;d=D[t].barMarginPC,u=D[t].multipleKeyPC,m=(v+d)*c.length,p=n*u;$(P[t]).css({width:m+"px",height:p+"px"}),(f=(g=a.append("g").attr("width",m).attr("height",p)).selectAll("rect").data(c).enter().append("rect").attr("fill",function(t){return r(t.acc)}).attr("width",v).attr("class","bar").attr("height",function(t){return t.acc*u}).attr("x",function(t,a){return a*(v+d)}).attr("y",function(t){return p-t.acc*u})).on("mouseover",function(t){d3.select(this).classed("barHover",!0),s.transition().duration(100).style("opacity","1").style("height","auto"),s.html("<p class='name'>"+t.key+"</p><p class='numb'>"+t.acc+"건 </p>")}).on("mouseout",function(t){d3.select(this).classed("barHover",!1),s.transition().duration(100).style("opacity","0")});g.append("g").attr("transform","translate("+(v+d)/2+","+(p+20)+")").selectAll("text").data(c).enter().append("text").attr("width","30").attr("transform",function(t,a){return"translate("+a*(v+d)+", 0)"}).attr("fill","rgba(255,255,255,0.8)").attr("font-size","10px").attr("class","graph-Xaxis").attr("text-anchor","middle").text(function(t){return t.key}),y=d3.scaleLinear().range([0,p]).domain([n,0]),g.append("g").attr("class","graph-Yaxis").attr("transform","translate(-10,0)").call(d3.axisLeft(y).ticks(5).tickFormat(d3.format("d")))}};for(g=0;g<N.length;g++)K(g);var W=!1;$(".tab-toggle-btn").on("click",function(t){t.preventDefault(),0==W&&($(this).children(".open").removeClass("open-animation"),$(".c-s-03").hide(),W=!0),$(this).parent(".tab-holder").toggleClass("tab-holder-close")}),$(".arch-tab .each-tab").find("span").on("click",function(){$(this).closest(".each-tab").attr("data-tab"),$(this).index();1==$(this).hasClass("on")?$(this).removeClass("on"):$(this).addClass("on");var t=[],a=[];for(i=0;i<victimValues.length;i++)t.push(0),a.push(0);V.style("opacity","1");var e=!1,c=!1;if($(".arch-tab .each-tab").each(function(n){if($(this).find("span").siblings().each(function(a){$(this).hasClass("on")&&(victimValues.forEach(function(e,c,i){1==function(t,a,e){switch(a){case 0:switch(e){case 0:return"떨어짐"==t.accType?1:0;case 1:return"끼임"==t.accType?1:0;case 2:return"물체에 맞음"==t.accType?1:0;case 3:return"부딪힘"==t.accType?1:0;case 4:return"깔림·뒤집힘"==t.accType?1:0;case 5:return-1==["떨어짐","끼임","물체에 맞음","부딪힘","깔림·뒤집힘"].indexOf(t.accType)?1:0}break;case 1:switch(e){case 0:return"건설업"==t.category?1:0;case 1:return"제조업"==t.category?1:0;case 2:return"기타업종"==t.category?1:0}break;case 2:switch(e){case 0:return t.holiday?1:0;case 1:return t.holiday?0:1}break;case 3:switch(e){case 0:return t.age<20?1:0;case 1:return t.age>=20&&t.age<30?1:0;case 2:return t.age>=30&&t.age<40?1:0;case 3:return t.age>=40&&t.age<50?1:0;case 4:return t.age>=50&&t.age<60?1:0;case 5:return t.age>=60?1:0}break;case 4:switch(e){case 0:return"초급"==t.skill?1:0;case 1:return"중급"==t.skill?1:0;case 2:return"고급"==t.skill?1:0}break;case 5:switch(e){case 0:return t.employeeNumb<5?1:0;case 1:return t.employeeNumb>=5&&t.employeeNumb<50?1:0;case 2:return t.employeeNumb>=50&&t.employeeNumb<300?1:0;case 3:return t.employeeNumb>=300?1:0}break;case 6:switch(e){case 0:return-1!=t.accCause.indexOf(1)&&-1!=t.accCause.indexOf(3)?1:0;case 1:return-1!=t.accCause.indexOf(36)||-1!=t.accCause.indexOf(50)?1:0;case 2:return-1!=t.accCause.indexOf(13)||-1!=t.accCause.indexOf(17)?1:0;case 3:return-1!=t.accCause.indexOf(12)?1:0;case 4:return-1!=t.accCause.indexOf(18)?1:0;case 5:return-1!=t.accCause.indexOf(16)?1:0;case 6:return-1!=t.accCause.indexOf(6)||-1!=t.accCause.indexOf(9)||-1!=t.accCause.indexOf(47)?1:0;case 7:return-1!=t.accCause.indexOf(11)||-1!=t.accCause.indexOf(42)||-1!=t.accCause.indexOf(29)||-1!=t.accCause.indexOf(23)?1:0;case 8:return-1!=t.accCause.indexOf(56)||-1!=t.accCause.indexOf(37)?1:0;case 9:return-1!=t.accCause.indexOf(15)||-1!=t.accCause.indexOf(33)||-1!=t.accCause.indexOf(21)?1:0}}}(i[c],n,a)&&(t[c]=1)}),e=!0,c=!0)}),n>0)if(1==e)for(0!=n&&-1==a.indexOf(1)&&(a=t.slice()),i=0;i<victimValues.length;i++)a[i]=a[i]&&t[i],t[i]=0;else for(i=0;i<victimValues.length;i++)t[i]=0;else 0==n&&(a=t.slice());e=!1}),1==c){var n=0;V.filter(function(t,e){return!a[e]}).style("opacity","0.2"),a.forEach(function(t,a){1==t&&n++}),$("#userSelect").html(n)}else $("#userSelect").html(victimValues.length)}),$(".hideme").css({opacity:"1",top:"0px"});var R=!1;$(window).scroll(function(){var t=$(window).scrollTop(),c=$(".title-holder").position().top,i=$(".icon-holder").position().top-.2*a,n=$(".spread-icon").position().top;t>=c?($(".title-holder").addClass("title-holder-up"),0==e&&$(".interactive-header").fadeIn()):t<c&&($(".title-holder").removeClass("title-holder-up"),$(".interactive-header").fadeOut()),$(".hideme").each(function(a){var e=$(this).offset().top+.3*$(this).outerHeight();t+$(window).height()>e&&$(this).animate({opacity:"1",top:"0px"},700,"swing")}),t>=n&&t<=$(".archive-para").position().top?0==R||0==$(".arch-tab").hasClass("tab-fixed")&&$(".arch-tab").addClass("tab-fixed tab-holder-close"):(t<n||t>$(".archive-para").position().top)&&1==$(".arch-tab").hasClass("tab-fixed")&&($(".arch-tab").removeClass("tab-fixed"),$(".arch-tab").addClass("tab-holder-close")),t>=i&&0==R&&($("body").addClass("fixed"),$(".spread-icon").animate({opacity:"1"}),$("html, body").animate({scrollTop:i},500,(V.transition().duration(function(){return Math.floor(3500*Math.random())+1500}).ease(d3.easeQuadInOut).attr("transform",function(t,a){return"translate("+t.Xpos+","+t.Ypos+")"}),void setTimeout(function(){C(),$("body").removeClass("fixed")},3e3))))});var j=1==e?[6,6,8]:[7,7,8],Y=L.map("map").setView([35.949855,128.001405],j[0]);Y.setMaxBounds(U);var _=new L.tileLayer("http://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',minZoom:j[1],maxZoom:j[2]});Y.addLayer(_),Y.scrollWheelZoom.disable(),Y.on("drag",function(){Y.panInsideBounds(U,{animate:!1})});var q=L.latLng(32.715666,123.691693),F=L.latLng(39.502717,131.660763),U=L.latLngBounds(q,F),X=acc_geoCode;!function(){for(var t=L.layerGroup().addTo(Y),a=0;a<X.length;a++)if(""!=X[a].lat&&""!=X[a].lon){var e=new L.circle([X[a].lat,X[a].lon],{color:"#fa9461",weight:1,fillColor:"#fddcaf",fillOpacity:.3,radius:2e3});t.addLayer(e)}else""!=X[a].lat&&""!=X[a].lon||0}()});